{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'SearchPage',\n  setup() {\n    const history = ref(JSON.parse(localStorage.history || '[]'));\n    const handleHistory = e => {\n      const searchVal = e.target.value;\n      if (!searchVal) {\n        return;\n      }\n      const hasVale = history.value.find(item => item === searchVal);\n      if (!hasVale) {\n        history.value.push(searchVal);\n        localStorage.history = JSON.stringify(history.value);\n      }\n    };\n    const handleClear = () => {\n      history.value = [];\n      localStorage.history = JSON.stringify([]);\n    };\n    const router = useRouter();\n    const handleI = () => {\n      router.back();\n    };\n    return {\n      history,\n      handleHistory,\n      handleClear,\n      handleI\n    };\n  }\n};","map":{"version":3,"names":["ref","useRouter","name","setup","history","JSON","parse","localStorage","handleHistory","e","searchVal","target","value","hasVale","find","item","push","stringify","handleClear","router","handleI","back"],"sources":["C:\\Users\\21112\\Desktop\\前端啊啊啊\\jingdon\\src\\views\\search\\Search.vue"],"sourcesContent":["<template>\r\n    <div class=\"wrapper\">\r\n        <div class=\"search\">\r\n            <span class=\"iconfont\">&#xeafe;</span>\r\n            <input class=\"search__area\"  @change=\"handleHistory\"/>\r\n            <div class=\"search__cancle\" @click=\"handleI\">取消</div>\r\n        </div>\r\n        <div class=\"area\">\r\n            <h4 class=\"area__title\" v-if=\"history.length\">搜索历史\r\n               <span class=\"area__title__clean\" @click=\"handleClear\">清除历史</span>\r\n            </h4>\r\n            <ul class=\"area__list\">\r\n                <li class=\"area__item\" v-for=\"item in history\" :key=\"item\">{{item}}</li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"area\">\r\n            <h4 class=\"area__title\">热门\r\n            </h4>\r\n            <ul class=\"area__list\">\r\n                <li class=\"area__item\">杰杰土鸡</li>\r\n                <li class=\"area__item\">杰杰土鸡</li>\r\n                <li class=\"area__item\">杰杰土鸡</li>\r\n                <li class=\"area__item\">杰杰土鸡</li>\r\n                <li class=\"area__item\">杰杰土鸡</li>\r\n                <li class=\"area__item\">杰杰土鸡</li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'SearchPage',\r\n  setup () {\r\n    const history = ref(JSON.parse(localStorage.history || '[]'))\r\n    const handleHistory = (e) => {\r\n      const searchVal = e.target.value\r\n      if (!searchVal) { return }\r\n      const hasVale = history.value.find(item => item === searchVal)\r\n      if (!hasVale) {\r\n        history.value.push(searchVal)\r\n        localStorage.history = JSON.stringify(history.value)\r\n      }\r\n    }\r\n    const handleClear = () => {\r\n      history.value = []\r\n      localStorage.history = JSON.stringify([])\r\n    }\r\n    const router = useRouter()\r\n    const handleI = () => {\r\n      router.back()\r\n    }\r\n    return { history, handleHistory, handleClear, handleI }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n    .area {\r\n        margin-top: .24rem;\r\n        line-height: .32rem;\r\n        &__title {\r\n            font-size: .16rem;\r\n           &__clean {\r\n            float: right;\r\n           }\r\n        }\r\n        &__list {\r\n            margin: 0;\r\n            padding: 0;\r\n            list-style-type: none;\r\n        }\r\n        &__item {\r\n            display: inline-block;\r\n            margin-right: .1rem;\r\n            padding: 0 .1rem .1rem 0;\r\n            color: #333;\r\n            border-radius: .02rem;\r\n        }\r\n    }\r\n    margin: 0 .18rem;\r\n    .search {\r\n        position: relative;\r\n        display: flex;\r\n        line-height: .32rem;\r\n        margin-top: .16rem;\r\n        &__area {\r\n            flex: 1;\r\n            padding: 0 .12rem 0 .44rem;\r\n            border-radius: .16rem;\r\n        }\r\n        &__cancle {\r\n            margin-left: .12rem;\r\n            font-size: .18rem;\r\n        }\r\n    }\r\n     .iconfont {\r\n        width: .12rem;\r\n        position: absolute;\r\n        left: .16rem;\r\n        color: #b7b7b7;\r\n    }\r\n  }\r\n</style>\r\n"],"mappings":";AA+BA,SAASA,GAAE,QAAS,KAAI;AACxB,SAASC,SAAQ,QAAS,YAAW;AAErC,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,KAAIA,CAAA,EAAK;IACP,MAAMC,OAAM,GAAIJ,GAAG,CAACK,IAAI,CAACC,KAAK,CAACC,YAAY,CAACH,OAAM,IAAK,IAAI,CAAC;IAC5D,MAAMI,aAAY,GAAKC,CAAC,IAAK;MAC3B,MAAMC,SAAQ,GAAID,CAAC,CAACE,MAAM,CAACC,KAAI;MAC/B,IAAI,CAACF,SAAS,EAAE;QAAE;MAAO;MACzB,MAAMG,OAAM,GAAIT,OAAO,CAACQ,KAAK,CAACE,IAAI,CAACC,IAAG,IAAKA,IAAG,KAAML,SAAS;MAC7D,IAAI,CAACG,OAAO,EAAE;QACZT,OAAO,CAACQ,KAAK,CAACI,IAAI,CAACN,SAAS;QAC5BH,YAAY,CAACH,OAAM,GAAIC,IAAI,CAACY,SAAS,CAACb,OAAO,CAACQ,KAAK;MACrD;IACF;IACA,MAAMM,WAAU,GAAIA,CAAA,KAAM;MACxBd,OAAO,CAACQ,KAAI,GAAI,EAAC;MACjBL,YAAY,CAACH,OAAM,GAAIC,IAAI,CAACY,SAAS,CAAC,EAAE;IAC1C;IACA,MAAME,MAAK,GAAIlB,SAAS,CAAC;IACzB,MAAMmB,OAAM,GAAIA,CAAA,KAAM;MACpBD,MAAM,CAACE,IAAI,CAAC;IACd;IACA,OAAO;MAAEjB,OAAO;MAAEI,aAAa;MAAEU,WAAW;MAAEE;IAAQ;EACxD;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}