{"ast":null,"code":"import { createStore } from 'vuex';\nconst setCartList = state => {\n  const {\n    cartList\n  } = state;\n  const cartListString = JSON.stringify(cartList);\n  localStorage.cartList = cartListString;\n};\nconst getCartList = () => {\n  return JSON.parse(localStorage.cartList) || {};\n};\nexport default createStore({\n  state: {\n    cartList: getCartList() || {}\n  },\n  getters: {},\n  mutations: {\n    addItemToCart(state, payload) {\n      const {\n        shopId,\n        productId,\n        productInfo\n      } = payload;\n      let shopInfo = state.cartList[shopId];\n      if (!shopInfo) {\n        shopInfo = {};\n      }\n      let product = shopInfo[productId];\n      if (!product) {\n        product = productInfo;\n        product.count = 0;\n      }\n      product.count += payload.num;\n      if (payload.num > 0) {\n        product.check = true;\n      }\n      if (product.count < 0) {\n        product.count = 0;\n      }\n      shopInfo[productId] = product;\n      state.cartList[shopId] = shopInfo;\n      setCartList(state);\n    },\n    checkIcon(state, payload) {\n      const {\n        shopId,\n        productId\n      } = payload;\n      const product = state.cartList[shopId][productId];\n      product.check = !product.check;\n      setCartList(state);\n    },\n    cleanCart(state, payload) {\n      const {\n        shopId\n      } = payload;\n      state.cartList[shopId] = {};\n      setCartList(state);\n    },\n    cartChecked(state, payload) {\n      const {\n        shopId\n      } = payload;\n      const products = state.cartList[shopId];\n      if (products) {\n        for (const i in products) {\n          const product = products[i];\n          product.check = !product.check;\n        }\n      }\n      setCartList(state);\n    }\n  },\n  actions: {},\n  modules: {}\n});","map":{"version":3,"names":["createStore","setCartList","state","cartList","cartListString","JSON","stringify","localStorage","getCartList","parse","getters","mutations","addItemToCart","payload","shopId","productId","productInfo","shopInfo","product","count","num","check","checkIcon","cleanCart","cartChecked","products","i","actions","modules"],"sources":["C:/Users/21112/Desktop/前端啊啊啊/jingdon/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\n\nconst setCartList = (state) => {\n  const { cartList } = state\n  const cartListString = JSON.stringify(cartList)\n  localStorage.cartList = cartListString\n}\n\nconst getCartList = () => {\n  return JSON.parse(localStorage.cartList) || {}\n}\n\nexport default createStore({\n  state: {\n    cartList: getCartList() || {}\n  },\n  getters: {\n  },\n  mutations: {\n    addItemToCart (state, payload) {\n      const { shopId, productId, productInfo } = payload\n      let shopInfo = state.cartList[shopId]\n      if (!shopInfo) { shopInfo = {} }\n      let product = shopInfo[productId]\n      if (!product) {\n        product = productInfo\n        product.count = 0\n      }\n      product.count += payload.num\n      if (payload.num > 0) { product.check = true }\n      if (product.count < 0) { product.count = 0 }\n      shopInfo[productId] = product\n      state.cartList[shopId] = shopInfo\n      setCartList(state)\n    },\n    checkIcon (state, payload) {\n      const { shopId, productId } = payload\n      const product = state.cartList[shopId][productId]\n      product.check = !product.check\n      setCartList(state)\n    },\n    cleanCart (state, payload) {\n      const { shopId } = payload\n      state.cartList[shopId] = {}\n      setCartList(state)\n    },\n    cartChecked (state, payload) {\n      const { shopId } = payload\n      const products = state.cartList[shopId]\n      if (products) {\n        for (const i in products) {\n          const product = products[i]\n          product.check = !product.check\n        }\n      }\n      setCartList(state)\n    }\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,MAAM;AAElC,MAAMC,WAAW,GAAIC,KAAK,IAAK;EAC7B,MAAM;IAAEC;EAAS,CAAC,GAAGD,KAAK;EAC1B,MAAME,cAAc,GAAGC,IAAI,CAACC,SAAS,CAACH,QAAQ,CAAC;EAC/CI,YAAY,CAACJ,QAAQ,GAAGC,cAAc;AACxC,CAAC;AAED,MAAMI,WAAW,GAAGA,CAAA,KAAM;EACxB,OAAOH,IAAI,CAACI,KAAK,CAACF,YAAY,CAACJ,QAAQ,CAAC,IAAI,CAAC,CAAC;AAChD,CAAC;AAED,eAAeH,WAAW,CAAC;EACzBE,KAAK,EAAE;IACLC,QAAQ,EAAEK,WAAW,CAAC,CAAC,IAAI,CAAC;EAC9B,CAAC;EACDE,OAAO,EAAE,CACT,CAAC;EACDC,SAAS,EAAE;IACTC,aAAaA,CAAEV,KAAK,EAAEW,OAAO,EAAE;MAC7B,MAAM;QAAEC,MAAM;QAAEC,SAAS;QAAEC;MAAY,CAAC,GAAGH,OAAO;MAClD,IAAII,QAAQ,GAAGf,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC;MACrC,IAAI,CAACG,QAAQ,EAAE;QAAEA,QAAQ,GAAG,CAAC,CAAC;MAAC;MAC/B,IAAIC,OAAO,GAAGD,QAAQ,CAACF,SAAS,CAAC;MACjC,IAAI,CAACG,OAAO,EAAE;QACZA,OAAO,GAAGF,WAAW;QACrBE,OAAO,CAACC,KAAK,GAAG,CAAC;MACnB;MACAD,OAAO,CAACC,KAAK,IAAIN,OAAO,CAACO,GAAG;MAC5B,IAAIP,OAAO,CAACO,GAAG,GAAG,CAAC,EAAE;QAAEF,OAAO,CAACG,KAAK,GAAG,IAAI;MAAC;MAC5C,IAAIH,OAAO,CAACC,KAAK,GAAG,CAAC,EAAE;QAAED,OAAO,CAACC,KAAK,GAAG,CAAC;MAAC;MAC3CF,QAAQ,CAACF,SAAS,CAAC,GAAGG,OAAO;MAC7BhB,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,GAAGG,QAAQ;MACjChB,WAAW,CAACC,KAAK,CAAC;IACpB,CAAC;IACDoB,SAASA,CAAEpB,KAAK,EAAEW,OAAO,EAAE;MACzB,MAAM;QAAEC,MAAM;QAAEC;MAAU,CAAC,GAAGF,OAAO;MACrC,MAAMK,OAAO,GAAGhB,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,CAACC,SAAS,CAAC;MACjDG,OAAO,CAACG,KAAK,GAAG,CAACH,OAAO,CAACG,KAAK;MAC9BpB,WAAW,CAACC,KAAK,CAAC;IACpB,CAAC;IACDqB,SAASA,CAAErB,KAAK,EAAEW,OAAO,EAAE;MACzB,MAAM;QAAEC;MAAO,CAAC,GAAGD,OAAO;MAC1BX,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC,GAAG,CAAC,CAAC;MAC3Bb,WAAW,CAACC,KAAK,CAAC;IACpB,CAAC;IACDsB,WAAWA,CAAEtB,KAAK,EAAEW,OAAO,EAAE;MAC3B,MAAM;QAAEC;MAAO,CAAC,GAAGD,OAAO;MAC1B,MAAMY,QAAQ,GAAGvB,KAAK,CAACC,QAAQ,CAACW,MAAM,CAAC;MACvC,IAAIW,QAAQ,EAAE;QACZ,KAAK,MAAMC,CAAC,IAAID,QAAQ,EAAE;UACxB,MAAMP,OAAO,GAAGO,QAAQ,CAACC,CAAC,CAAC;UAC3BR,OAAO,CAACG,KAAK,GAAG,CAACH,OAAO,CAACG,KAAK;QAChC;MACF;MACApB,WAAW,CAACC,KAAK,CAAC;IACpB;EACF,CAAC;EACDyB,OAAO,EAAE,CACT,CAAC;EACDC,OAAO,EAAE,CACT;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}